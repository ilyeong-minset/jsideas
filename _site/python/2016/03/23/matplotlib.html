<!DOCTYPE html>
<html>
  <head>
  <meta charset="utf-8">
  <!-- (1) Optimize for mobile versions: http://goo.gl/EOpFl -->
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <!-- (1) force latest IE rendering engine: bit.ly/1c8EiC9 -->
  <meta http-equiv="X-UA-Compatible" content="IE=edge">

  <title>Matplotlib을 활용한 이세돌 vs. 알파고 데이터 시각화</title>
  <meta name="description" content="a novice's journey into data science
" />

  <meta name="HandheldFriendly" content="True" />
  <meta name="MobileOptimized" content="320" />
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

  <link rel="canonical" href="http://localhost:4000/python/2016/03/23/matplotlib.html">

  <link rel="shortcut icon" href="/assets/images/favicon.ico">
<!--  <link rel="stylesheet" href=""> -->
  <link rel="stylesheet" href="http://brick.a.ssl.fastly.net/Linux+Libertine:400,400i,700,700i/Open+Sans:400,400i,700,700i">
  <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css" rel="stylesheet">

  <link rel="stylesheet" type="text/css" media="screen" href="/css/main.css" />
  <link rel="stylesheet" type="text/css" media="print" href="/css/print.css" />
</head>

  <body itemscope itemtype="http://schema.org/Article">
    <!-- header start -->

<a href="http://localhost:4000" class="logo-readium"><span class="logo" style="background-image: url(/assets/images/df_logo.jpg)"></span></a>

<!-- header end -->

    <main class="content" role="main">
      <article class="post">
        
        <div class="article-image">
          <div class="post-image-image" style="background-image: url(/assets/alphago/header.png)">
            Article Image
          </div>
          <div class="post-meta">
            <h1 class="post-title">Matplotlib을 활용한 이세돌 vs. 알파고 데이터 시각화</h1>
            <div class="cf post-meta-text">
              <div class="author-image" style="background-image: url(/assets/images/author.jpg)">Blog Logo</div>
              <h4 class="author-name" itemprop="author" itemscope itemtype="http://schema.org/Person">Junsik Whang</h4>
              on
              <time datetime="2016-03-23 09:34">23 Mar 2016</time>
              <!-- , tagged on <span class="post-tag-">, <a href="/tag/"></a></span> -->
            </div>
            <div style="text-align:center">
              <a href="#topofpage" class="topofpage"><i class="fa fa-angle-down"></i></a>
            </div>
          </div>
        </div>
        
        <section class="post-content">
          <div class="post-reading">
            <span class="post-reading-time"></span> read
          </div>
          <a name="topofpage"></a>
          <h2 id="들어가며">들어가며</h2>
<p><br />
그동안 써온 블로그글 중 계속 꾸준히 방문자 수가 이어지는 글은 <a href="http://jsideas.net/python/2015/08/11/histogram_tutorial_part2.html">파이썬 초보 - pandas와 matplotlib을 활용한 간단 분석 part 2</a>입니다. 심지어 이 글은 구글에 ‘pandas 히스토그램’으로 검색을 하면 검색 상위에 올라올 정도입니다.. 아마 pandas와 히스토그램을 글에서 많이 언급했기 때문이 아닌가 싶습니다.</p>

<p>최근에는 d3.js 쪽 업데이트를 자주 해왔었는데, 이번에는 <a href="http://jsideas.net/python/2016/03/16/Google_DeepMind.html">이세돌 vs. 알파고 분석</a>을 하는데 아주 요긴하게 사용했던 matplotlib과 pandas를 또 간단히 다뤄보도록 하겠습니다.</p>

<hr />

<h2 id="데이터셋">데이터셋</h2>
<p><br />
분석에서 사용할 데이터셋은 제가 직접 수기로 받아적은 알파고 vs. 이세돌 데이터입니다. 로데이터는 <a href="https://github.com/junkwhinger/AlphaGo_raw">GitHub</a>에서 바로 받아가실 수 있습니다.</p>

<hr />

<h2 id="분석-방향">분석 방향</h2>
<p><br />
인간과 기계는 어떻게 다르게 생각할 것인가? 그리고 그 차이는 어떤 결과를 만들어낼 것인가? 이번 이세돌 9단과 알파고의 대결을 지켜보며 가장 관심있게 바라본 부분이었습니다. 연산이 아닌 직관의 영역이기에 인간이 우세할 것이다라는 기존의 낙관론은 2국이 끝나있을 때 ‘인간이 단 한판이라도 이길 수 있을까’하는 비관론으로 변해있었습니다.</p>

<p>첫 대국에서 이세돌 9단의 떨리는 손을 바라보며 표정도, 분위기도 읽을 수 없는 기계를 상대로 게임을 한다는 것이 얼마나 무서울까-싶었습니다. 장고를 거듭하는 이 9단과 달리, 알파고는 거의 일정한 시간 내에 착수를 마쳤습니다. 이 둘의 착수시간 패턴을 시각화할 수 있다면, 인간다움과 기계다움을 대조해서 표현할 수 있지 않을까- 싶었습니다. 그런 생각에서 간단히 손으로 데이터를 모으기 시작했지요.</p>

<p>게임 당 이세돌 9단과 알파고는 각각 2시간을 가지고 시작합니다. 상대방이 착수할 때마다 시간 카운트 다운이 시작되며, 착수하면 시간이 멈춥니다. 2시간이 모두 소진되면 초읽기가 시작됩니다. 이 9단과 알파고 중 처음 2시간을 먼저 사용한 쪽은 어디일까요. 그리고 각 대국 당 소진되는 속도는 어떻게 다를까요? 이번 글에서는 착수시간으로 시각화했던 차트 중에서 ‘Remaining Time’을 ipython notebook을 사용해서 순서대로 뽑아보겠습니다.</p>

<hr />

<h2 id="환경-구축">환경 구축</h2>
<p><br />
본 분석을 ipython notebook을 사용해 진행하며, python 3.5를 사용했습니다. 보다 편리한 분석 환경 구축을 위해 virtualenv 사용을 권해드립니다. 또한 라이브러리는 pandas와 matplotlib을 사용했습니다.</p>

<hr />

<h2 id="라이브러리-불러오기">라이브러리 불러오기</h2>
<p><br /></p>

<figure class="highlight"><pre><code class="language-python" data-lang="python"><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="n">pd</span> <span class="c">#1</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="n">plt</span> <span class="c">#2</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="n">np</span> <span class="c">#3</span>
<span class="o">%</span><span class="n">matplotlib</span> <span class="n">inline</span> <span class="c">#4</span>
<span class="kn">import</span> <span class="nn">warnings</span> <span class="c">#5</span>
<span class="n">warnings</span><span class="o">.</span><span class="n">filterwarnings</span><span class="p">(</span><span class="s">'ignore'</span><span class="p">)</span> <span class="c">#5</span></code></pre></figure>

<p>1)가장 주요하게 사용할 pandas 패키지를 불러옵니다.<br />
2)시각화에 사용할 matplotlib 패키지를 불러옵니다.<br />
3)x축 레이블 간격에 사용할 numpy 패키지를 불러옵니다. 조금 과하긴 하지만 편하니 불러옵니다.<br />
4)ipython notebook에서 만드는 차트를 별도의 창이 아닌, notebook내에서 보기 위한 설정입니다.<br />
5)간혹 ipython이 실행은 시켜주나 depreciation이 예정된 기능에 대해 경고창을 띄웁니다. 빨간색이 보기 싫거나 한번에 모든 명령을 돌리고 싶은 경우, 경고를 꺼두면 편합니다.<br /></p>

<hr />

<h2 id="데이터-경로-정하기">데이터 경로 정하기</h2>
<p><br /></p>

<figure class="highlight"><pre><code class="language-python" data-lang="python"><span class="n">game1</span> <span class="o">=</span> <span class="s">'/users/jun/python/alphago/first_game.csv'</span>
<span class="n">game2</span> <span class="o">=</span> <span class="s">'/users/jun/python/alphago/second_game.csv'</span>
<span class="n">game3</span> <span class="o">=</span> <span class="s">'/users/jun/python/alphago/third_game.csv'</span>
<span class="n">game4</span> <span class="o">=</span> <span class="s">'/users/jun/python/alphago/fourth_game.csv'</span>
<span class="n">game5</span> <span class="o">=</span> <span class="s">'/users/jun/python/alphago/fifth_game.csv'</span></code></pre></figure>

<p>바로 명령어를 사용해서 파일을 읽어들이기보다는 경로를 미리 지정해줍니다. 특히 다수의 파일을 사용하는 경우, 경로를 따로 정해주면 좋습니다. 후에 파일명이 변하게 되어도 찾기가 편합니다.</p>

<hr />

<h2 id="데이터-전처리">데이터 전처리</h2>

<figure class="highlight"><pre><code class="language-python" data-lang="python"><span class="k">def</span> <span class="nf">time_func</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">pd</span><span class="o">.</span><span class="n">isnull</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
        <span class="k">return</span> <span class="mi">0</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">k</span> <span class="o">=</span> <span class="n">x</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s">":"</span><span class="p">)</span>
        <span class="n">hour</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">k</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
        <span class="n">minute</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">k</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
        <span class="n">second</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">k</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span>
        <span class="n">ts</span> <span class="o">=</span> <span class="n">hour</span> <span class="o">*</span> <span class="mi">3600</span> <span class="o">+</span> <span class="n">minute</span> <span class="o">*</span> <span class="mi">60</span> <span class="o">+</span> <span class="n">second</span>
        <span class="k">return</span> <span class="n">ts</span></code></pre></figure>

<p>먼저 01:41:10과 같은 형태를 취하고 있는 시간을 초 단위로 변환하기 위한 커스텀 함수를 만들어줍니다. 뒤에서 <code class="highlighter-rouge">.apply(lambda x: custom_func(x))</code> 구문을 사용할 함수로, 시간을 담고 있는 데이터프레임 컬럼의 각 value에 적용합니다. 일단 time_func라는 이름으로 만들어둡니다.</p>

<p>로직은 간단합니다. value가 x라는 인자로 넘어오게 되는데, 이 x가 null값인 경우 0이, 아닌 경우 else: 이후 구문이 실행됩니다. 01:41:10이라는 string이 넘어온 경우, 이를 : 단위로 자른 후 시간, 분, 초에 할당한 후, 초 단위로 통일하여 ts에 저장, 반환합니다.</p>

<p>이 함수는 바로 다음에 이어질 함수안에서 돌아갑니다. 원래는 하나의 함수가 아니라 다 풀어져있었으나, 동일한 방법으로 여러 파일을 처리하게 되다보니 과정을 효율화시키기 위해 하나의 함수로 묶어 정리해주었습니다.</p>

<figure class="highlight"><pre><code class="language-python" data-lang="python"><span class="k">def</span> <span class="nf">countdown</span><span class="p">(</span><span class="n">a_file</span><span class="p">):</span>
    <span class="n">data</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">a_file</span><span class="p">)</span>
    <span class="n">lee_b4_countdown</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">data</span><span class="o">.</span><span class="n">Lee_Sedol</span><span class="o">.</span><span class="n">dropna</span><span class="p">())</span>
    <span class="n">al_b4_countdown</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">data</span><span class="o">.</span><span class="n">AlphaGo</span><span class="o">.</span><span class="n">dropna</span><span class="p">())</span>
    <span class="n">b4_countdown</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">lee_b4_countdown</span><span class="p">,</span> <span class="n">al_b4_countdown</span><span class="p">)</span>
    <span class="n">data</span><span class="p">[</span><span class="s">'Lee_Sedol_cl'</span><span class="p">]</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">Lee_Sedol</span><span class="p">[:</span><span class="n">b4_countdown</span><span class="p">]</span>
    <span class="n">data</span><span class="p">[</span><span class="s">'AlphaGo_cl'</span><span class="p">]</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">AlphaGo</span><span class="p">[:</span><span class="n">b4_countdown</span><span class="p">]</span>
    <span class="n">ts_df</span> <span class="o">=</span> <span class="n">data</span><span class="p">[[</span><span class="s">'Lee_Sedol_cl'</span><span class="p">,</span> <span class="s">'AlphaGo_cl'</span><span class="p">]]</span>
    <span class="n">ts_df</span><span class="p">[</span><span class="s">'Lee_Sedol_ts'</span><span class="p">]</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">Lee_Sedol_cl</span><span class="o">.</span><span class="nb">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">time_func</span><span class="p">(</span><span class="n">x</span><span class="p">))</span>
    <span class="n">ts_df</span><span class="p">[</span><span class="s">'AlphaGo_ts'</span><span class="p">]</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">AlphaGo_cl</span><span class="o">.</span><span class="nb">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">time_func</span><span class="p">(</span><span class="n">x</span><span class="p">))</span>
    <span class="n">temp_df</span> <span class="o">=</span> <span class="n">ts_df</span><span class="p">[[</span><span class="s">'Lee_Sedol_ts'</span><span class="p">,</span> <span class="s">'AlphaGo_ts'</span><span class="p">]]</span>
    <span class="n">result_df</span> <span class="o">=</span> <span class="n">temp_df</span><span class="p">[(</span><span class="n">temp_df</span><span class="o">.</span><span class="n">Lee_Sedol_ts</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">)</span> <span class="o">|</span> <span class="p">(</span><span class="n">temp_df</span><span class="o">.</span><span class="n">AlphaGo_ts</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">)]</span> <span class="o">/</span> <span class="mi">60</span>
    <span class="k">return</span> <span class="n">result_df</span></code></pre></figure>

<p>다음은 countdown이라는 커스텀 함수입니다. 여기에서는 인자가 파일 하나로 들어갑니다. 앞에서 밝힌 바와 같이 반복작업의 효율화를 위해 하나의 함수에 몰아넣었습니다.</p>

<p>먼저 <code class="highlighter-rouge">pd.read_csv()</code>함수를 이용해 a_file이라는 인자로 넘어온 파일 경로를 읽어들입니다.</p>

<p>데이터셋을 살펴보시면 아시겠지만, 초읽기에 들어간 후에는 Lee_Sedol과 AlphaGo 행은 공란으로 기록되어있습니다. 공란은 당연히 시간 변환이 되지 않습니다. 초읽기전의 2시간 데이터만 다루기로 했으므로, 공란 제외를 위해서 <code class="highlighter-rouge">.dropna()</code> 함수를 사용합니다. 그리고 len()을 덮어씌워 초읽기 전까지의 착수지점(index)를 확보하고, 이를 통해 초읽기 전까지 데이터를 자릅니다.</p>

<p><code class="highlighter-rouge">ts_df</code>에 초읽기 전까지 데이터를 집어넣은 후, 앞서 정의한 time_func 함수를 사용합니다. <code class="highlighter-rouge">.apply(lambda x: time_func(x))</code>를 사용하여 손쉽게 ts를 구합니다. 마지막으로 둘다 초읽기에 들어간 상황, 즉 ts가 0이 된 행을 제외한 result_df를 반환합니다.</p>

<p>여러 스크립트를 몰아넣었지만, def 이후를 따로 떼어다 파일경로를 넣고 실행하면 각 단계별 아웃풋을 확인할 수 있습니다.</p>

<p>이제 앞서 불러온 파일경로에 countdown 함수를 실행해봅니다.</p>

<figure class="highlight"><pre><code class="language-python" data-lang="python"><span class="n">game1_ts</span> <span class="o">=</span> <span class="n">countdown</span><span class="p">(</span><span class="n">game1</span><span class="p">)</span>
<span class="n">game2_ts</span> <span class="o">=</span> <span class="n">countdown</span><span class="p">(</span><span class="n">game2</span><span class="p">)</span>
<span class="n">game3_ts</span> <span class="o">=</span> <span class="n">countdown</span><span class="p">(</span><span class="n">game3</span><span class="p">)</span>
<span class="n">game4_ts</span> <span class="o">=</span> <span class="n">countdown</span><span class="p">(</span><span class="n">game4</span><span class="p">)</span>
<span class="n">game5_ts</span> <span class="o">=</span> <span class="n">countdown</span><span class="p">(</span><span class="n">game5</span><span class="p">)</span></code></pre></figure>

<p>잘 처리되었는지 확인해볼까요?
<code class="highlighter-rouge">game1_ts.tail(10)</code>으로 데이터프레임의 맨 끝 10줄을 봅시다. 
<img src="/assets/alphago/game1_ts.png" alt="game1_ts" /></p>

<p>초가 아닌 분 단위로 ts가 잘 정리되어 들어왔습니다. 마지막으로 모든 게임을 하나의 df에 묶기 전에 각 게임의 착수 순번을 기록해두어야 합니다. 현재 착수 순번은 index에 기록되어있습니다. <code class="highlighter-rouge">.reset_index</code>함수를 사용하면 index를 개별 컬럼으로 손쉽게 빼낼 수 있습니다.</p>

<figure class="highlight"><pre><code class="language-python" data-lang="python"><span class="n">game1_ts</span><span class="o">.</span><span class="n">reset_index</span><span class="p">(</span><span class="n">level</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">inplace</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
<span class="n">game2_ts</span><span class="o">.</span><span class="n">reset_index</span><span class="p">(</span><span class="n">level</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">inplace</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
<span class="n">game3_ts</span><span class="o">.</span><span class="n">reset_index</span><span class="p">(</span><span class="n">level</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">inplace</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
<span class="n">game4_ts</span><span class="o">.</span><span class="n">reset_index</span><span class="p">(</span><span class="n">level</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">inplace</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
<span class="n">game5_ts</span><span class="o">.</span><span class="n">reset_index</span><span class="p">(</span><span class="n">level</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">inplace</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span></code></pre></figure>

<p>어디 잘 적용되었는지 테스트해볼까요?</p>

<p>pandas의 특출난 장점 중 하나는 df 뒤에 <code class="highlighter-rouge">.plot()</code>만 붙여서 바로 차트를 그릴 수 있다는 점입니다. 아주 쓸만하죠. x축을 index로 지정하여 라인플롯을 그려봅시다.</p>

<p><img src="/assets/alphago/game4_ts_plot.png" alt="game4_ts_plot" /></p>

<hr />

<h2 id="전체-남은-시간-차트-그리기-준비">전체 남은 시간 차트 그리기 (준비)</h2>

<p>자, 이제 5개 대국 데이터를 모두 합쳐서 이세돌 9단과 알파고가 2시간을 어떻게 사용했는지 그려봅시다.</p>

<p>먼저, 각 대국을 구분할 수 있도록 컬럼명을 바꿔줍니다. 선수 이름 앞에 게임명을 붙여줍니다.</p>

<figure class="highlight"><pre><code class="language-python" data-lang="python"><span class="n">game1_ts</span><span class="o">.</span><span class="n">columns</span> <span class="o">=</span> <span class="p">[</span><span class="s">'index'</span><span class="p">,</span> <span class="s">'[G1]Lee_Sedol'</span><span class="p">,</span> <span class="s">'[G1]AlphaGo'</span><span class="p">]</span>
<span class="n">game2_ts</span><span class="o">.</span><span class="n">columns</span> <span class="o">=</span> <span class="p">[</span><span class="s">'index'</span><span class="p">,</span> <span class="s">'[G2]Lee_Sedol'</span><span class="p">,</span> <span class="s">'[G2]AlphaGo'</span><span class="p">]</span>
<span class="n">game3_ts</span><span class="o">.</span><span class="n">columns</span> <span class="o">=</span> <span class="p">[</span><span class="s">'index'</span><span class="p">,</span> <span class="s">'[G3]Lee_Sedol'</span><span class="p">,</span> <span class="s">'[G3]AlphaGo'</span><span class="p">]</span>
<span class="n">game4_ts</span><span class="o">.</span><span class="n">columns</span> <span class="o">=</span> <span class="p">[</span><span class="s">'index'</span><span class="p">,</span> <span class="s">'[G4]Lee_Sedol'</span><span class="p">,</span> <span class="s">'[G4]AlphaGo'</span><span class="p">]</span>
<span class="n">game5_ts</span><span class="o">.</span><span class="n">columns</span> <span class="o">=</span> <span class="p">[</span><span class="s">'index'</span><span class="p">,</span> <span class="s">'[G5]Lee_Sedol'</span><span class="p">,</span> <span class="s">'[G5]AlphaGo'</span><span class="p">]</span></code></pre></figure>

<p>다음은 df 합치기입니다. 모든 df를 이어붙이는 작업인데, append를 사용해서 행 붙이기를 합니다.</p>

<figure class="highlight"><pre><code class="language-python" data-lang="python"><span class="n">g_df</span> <span class="o">=</span> <span class="n">game1_ts</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">game2_ts</span><span class="p">)</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">game3_ts</span><span class="p">)</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">game4_ts</span><span class="p">)</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">game5_ts</span><span class="p">)</span></code></pre></figure>

<p>이런 식으로 <code class="highlighter-rouge">.append</code> 함수를 연속적으로 사용하면 됩니다. g_df를 출력하면 null 값이 굉장히 많이 보입니다. 이는 합치는 df의 컬럼이 index를 제외하고는 다 다르기 때문입니다. 다른 열에 대해서 행 붙이기를 하게 되면, 다른 제목을 가진 열에는 붙일 내용이 없으므로 null이 들어가게 됩니다. 
여기서 왜 이런 식으로 df를 합쳤냐라는 의문이 들게 되는데, pandas의 plot에서는 열 이름으로 카테고리를 구분해주기 때문입니다. (분명 직접 지정해주는 방법도 있을 듯 합니다.) 게임명 + 선수명으로 열 이름이 구분되어야 다음에서 깔끔하게 플롯을 그릴 수 있습니다.</p>

<p>마지막으로 x축을 최대 착수 순번에 맞추기 위해서 5국 전체를 통틀어 가장 긴 착수 순번을 뽑습니다. 
<code class="highlighter-rouge">max_length = max(g_df.index)</code></p>

<hr />

<h2 id="이제-진짜로-그리기">이제 진짜로 그리기</h2>
<p><br />
이제 다왔습니다. 그려봅시다.</p>

<figure class="highlight"><pre><code class="language-python" data-lang="python"><span class="n">fig</span> <span class="o">=</span> <span class="n">g_df</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="s">'index'</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="p">[</span><span class="s">'#f6e8c3'</span><span class="p">,</span><span class="s">'#c7eae5'</span><span class="p">,</span><span class="s">'#dfc27d'</span><span class="p">,</span><span class="s">'#80cdc1'</span><span class="p">,</span><span class="s">'#bf812d'</span><span class="p">,</span><span class="s">'#35978f'</span><span class="p">,</span><span class="s">'#8c510a'</span><span class="p">,</span><span class="s">'#01665e'</span><span class="p">,</span><span class="s">'#543005'</span><span class="p">,</span><span class="s">'#003c30'</span><span class="p">],</span> <span class="n">marker</span><span class="o">=</span><span class="s">'o'</span><span class="p">,</span> <span class="n">markersize</span><span class="o">=</span><span class="mi">6</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.8</span><span class="p">,</span> <span class="n">linewidth</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">15</span><span class="p">,</span> <span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">20</span><span class="p">,</span> <span class="mi">8</span><span class="p">))</span>

<span class="n">fig</span><span class="o">.</span><span class="n">set_axis_bgcolor</span><span class="p">(</span><span class="s">'white'</span><span class="p">)</span> 
<span class="n">plt</span><span class="o">.</span><span class="n">xticks</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">max_length</span> <span class="o">+</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">5</span><span class="p">))</span>
<span class="n">plt</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">b</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">which</span><span class="o">=</span><span class="s">'major'</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s">'0.8'</span><span class="p">,</span><span class="n">linestyle</span><span class="o">=</span><span class="s">'-'</span><span class="p">)</span>

<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s">'Lee Sedol vs. AlphaGo: Remaining Minutes'</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="mi">25</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s">'Remaining Minutes'</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="mi">15</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s">'Turn Index'</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="mi">15</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">prop</span><span class="o">=</span><span class="p">{</span><span class="s">'size'</span><span class="p">:</span><span class="mi">15</span><span class="p">})</span>

<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span></code></pre></figure>

<p>자 먼저, 앞선 게임4 그래프와 동일하게 전체 df인 g_df에 <code class="highlighter-rouge">.plot</code>을 붙여 차트를 그립니다. 여기에 몇가지 추가 파라미터가 붙습니다. <code class="highlighter-rouge">color</code> 인자로 컬럼별 색상을 지정해줄 수 있습니다. <a href="http://colorbrewer2.org/">colorbrewer2</a>를 사용하면 아주 효과적인 색상 선택을 할 수 있습니다. 여기서는 색맹인 분들도 차트를 볼 수 있도록 색상을 선택했습니다. 이 외에도 마커타입, 선 굵기, 폰트 크기를 설정할 수 있으며, 특히 figsize로 차트의 크기를 설정해줍니다.</p>

<p>그 다음은 x축의 tick 인터벌 조정입니다. 여기서 numpy를 사용합니다. <code class="highlighter-rouge">np.arange</code>를 통해 0부터 최대 착수 순번까지 5씩 건너뛰는 수열을 만들고, 이를 x축 인터벌로 지정합니다. 최대 순번에 2를 더하여 끝자락에 여유를 두었습니다.</p>

<p>마지막으로 x, y 레이블과 차트 이름을 붙인 후 <code class="highlighter-rouge">plt.show()</code>로 완성된 차트를 띄웁니다.</p>

<p>빠밤!</p>

<p><img src="/assets/alphago/total_remaining.png" alt="total_remaining_plot" /></p>

          <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<!-- ad -->
<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-4190486040269313"
     data-ad-slot="1008472640"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>

        </section>
        <footer class="post-footer">
          <section class="share">
            
              
                <a class="icon-twitter" href="http://twitter.com/share?text=Matplotlib%EC%9D%84+%ED%99%9C%EC%9A%A9%ED%95%9C+%EC%9D%B4%EC%84%B8%EB%8F%8C+vs.+%EC%95%8C%ED%8C%8C%EA%B3%A0+%EB%8D%B0%EC%9D%B4%ED%84%B0+%EC%8B%9C%EA%B0%81%ED%99%94&amp;url=http://localhost:4000/python/2016/03/23/matplotlib"
                  onclick="window.open(this.href, 'twitter-share', 'width=550,height=255');return false;">
                <i class="fa fa-twitter"></i><span class="hidden">twitter</span>
                </a>
              
            
              
            
          </section>
        </footer>
        <div class="bottom-teaser cf">
          <div class="isLeft">
            <h5 class="index-headline featured"><span>Written by</span></h5>
            <section class="author">
              <div class="author-image" style="background-image: url(/assets/images/author.jpg)">Blog Logo</div>
              <h4>Junsik Whang</h4>
              <p class="bio"></p>
              <hr>
              <p class="published">Published <time datetime="2016-03-23 09:34">23 Mar 2016</time></p>
            </section>
          </div>
          
          <div class="isRight">
            <h5 class="index-headline featured"><span>Supported by</span></h5>
            <footer class="site-footer">
              <section class="poweredby">Proudly published with <a href="http://jekyllrb.com"> Jekyll</a></section>
              <a class="subscribe" href="/feed.xml"> <span class="tooltip"> <i class="fa fa-rss"></i> You should subscribe to my feed.</span></a>
              <div class="inner">
                <section class="copyright">All content copyright <a href="/">Junsik Whang</a> &copy; 2018<br>All rights reserved.</section>
              </div>
            </footer>
          </div>
        </div>
      </article>
    </main>
    <div class="bottom-closer">
      <div class="background-closer-image"  style="background-image: url(/assets/images/cA4aKEIPQrerBnp1yGHv_IMG_9534-3-2.jpg)">
        Image
      </div>
      <div class="inner">
        <h1 class="blog-title">jsideas</h1>
        <h2 class="blog-description">a novice's journey into data science
</h2>
        <a href="/" class="btn">Back to Overview</a>
      </div>
    </div>
    <script src="https://code.jquery.com/jquery-1.11.1.min.js"></script>
<script type="text/javascript" src="/assets/js/jquery.fitvids.js"></script>
<script type="text/javascript" src="/assets/js/index.js"></script>
<script type="text/javascript" src="/assets/js/readingTime.min.js"></script>
<script>
(function ($) {
  "use strict";
  $(document).ready(function(){

    var $window = $(window),
    $image = $('.post-image-image, .teaserimage-image');
    
      $window.on('scroll', function() {
        var top = $window.scrollTop();

        if (top < 0 || top > 1500) { return; }
        $image
          .css('transform', 'translate3d(0px, '+top/3+'px, 0px)')
          .css('opacity', 1-Math.max(top/700, 0));
      });
      $window.trigger('scroll');

      var height = $('.article-image').height();
      $('.post-content').css('padding-top', height + 'px');

      $('a[href*=#]:not([href=#])').click(function() {
        if (location.pathname.replace(/^\//,'') == this.pathname.replace(/^\//,'')
         && location.hostname == this.hostname) {
          var target = $(this.hash);
          target = target.length ? target : $('[name=' + this.hash.slice(1) +']');
          if (target.length) {
            $('html,body').animate({ scrollTop: target.offset().top }, 500);
            return false;
          }
        }
      });

  });
}(jQuery));
</script>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-36651119-2', 'auto');
  ga('send', 'pageview');

</script>

  </body>
</html>
